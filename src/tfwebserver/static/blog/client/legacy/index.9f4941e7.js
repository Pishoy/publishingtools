import{a as t,b as n,c as e,d as a,e as s,f as o,i as r,s as c,g as i,S as u,h as p,v as l,j as f,k as h,w as m,l as d,m as g,n as v,o as y,O as b,z as _,t as $,T as k,u as P,A as x,L as w,M as j,B as L,C as N,p as R,I,J as C,K as D,N as E}from"./client.570a4c37.js";import{a as S,b as q}from"./_api.12c59899.js";import"./showdown.7548a49d.js";import{L as z}from"./ListPagination.32d5c772.js";import{P as B}from"./PostList.ad064009.js";function J(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var e,o=a(t);if(n){var r=a(this).constructor;e=Reflect.construct(o,arguments,r)}else e=o.apply(this,arguments);return s(this,e)}}function O(t){var n,e;return{c:function(){n=p("script"),e=l('cookieconsent.run({\n        notice_banner_type: "headline",\n        consent_type: "express",\n        palette: "light",\n        language: "en",\n        website_name: "https://blog.threefold.io/",\n        cookies_policy_url: "https://wiki.threefold.io/#/privacypolicy"\n      });'),this.h()},l:function(t){n=f(t,"SCRIPT",{type:!0});var a=h(n);e=m(a,'cookieconsent.run({\n        notice_banner_type: "headline",\n        consent_type: "express",\n        palette: "light",\n        language: "en",\n        website_name: "https://blog.threefold.io/",\n        cookies_policy_url: "https://wiki.threefold.io/#/privacypolicy"\n      });'),a.forEach(d),this.h()},h:function(){g(n,"type","text/javascript")},m:function(t,a){v(t,n,a),y(n,e)},d:function(t){t&&d(n)}}}function T(t){return{c:R,l:R,m:R,p:R,i:R,o:R,d:R}}function V(t){var n,e,a,s,o=new B({props:{posts:t[10],username:t[3]}}),r=new z({props:{articlesCount:t[2],articlesPerPage:t[1].posts_per_page,objectPath:"/blog/"+t[3]+"/posts",page:t[4]}});return{c:function(){n=p("div"),I(o.$$.fragment),e=$(),a=p("div"),I(r.$$.fragment),this.h()},l:function(t){n=f(t,"DIV",{class:!0});var s=h(n);C(o.$$.fragment,s),s.forEach(d),e=P(t),a=f(t,"DIV",{class:!0});var c=h(a);C(r.$$.fragment,c),c.forEach(d),this.h()},h:function(){g(n,"class","row"),g(a,"class","row")},m:function(t,c){v(t,n,c),D(o,n,null),v(t,e,c),v(t,a,c),D(r,a,null),s=!0},p:function(t,n){var e={};1&n&&(e.posts=t[10]),8&n&&(e.username=t[3]),o.$set(e);var a={};4&n&&(a.articlesCount=t[2]),2&n&&(a.articlesPerPage=t[1].posts_per_page),8&n&&(a.objectPath="/blog/"+t[3]+"/posts"),16&n&&(a.page=t[4]),r.$set(a)},i:function(t){s||(w(o.$$.fragment,t),w(r.$$.fragment,t),s=!0)},o:function(t){j(o.$$.fragment,t),j(r.$$.fragment,t),s=!1},d:function(t){t&&d(n),E(o),t&&d(e),t&&d(a),E(r)}}}function A(t){return{c:R,l:R,m:R,p:R,i:R,o:R,d:R}}function K(t){var n,e,a,s,o,r=t[1].privacy_popup&&O(),c={ctx:t,current:null,token:null,pending:A,then:V,catch:T,value:10,blocks:[,,,]};return b(s=t[0],c),{c:function(){r&&r.c(),n=_(),e=$(),a=_(),c.block.c(),this.h()},l:function(t){var s=k('[data-svelte="svelte-zp0xhd"]',document.head);r&&r.l(s),n=_(),s.forEach(d),e=P(t),a=_(),c.block.l(t),this.h()},h:function(){document.title="Blog"},m:function(t,s){r&&r.m(document.head,null),y(document.head,n),v(t,e,s),v(t,a,s),c.block.m(t,c.anchor=s),c.mount=function(){return a.parentNode},c.anchor=a,o=!0},p:function(e,a){var o=x(a,1)[0];if((t=e)[1].privacy_popup?r||((r=O()).c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null),c.ctx=t,1&o&&s!==(s=t[0])&&b(s,c));else{var i=t.slice();i[10]=c.resolved,c.block.p(i,o)}},i:function(t){o||(w(c.block),o=!0)},o:function(t){for(var n=0;n<3;n+=1){var e=c.blocks[n];j(e)}o=!1},d:function(t){r&&r.d(t),d(n),t&&d(e),t&&d(a),c.block.d(t),c.token=null,c=null}}}function M(t){return F.apply(this,arguments)}function F(){return(F=t(n.mark(function t(e){var a,s,o,r,c,i,u,p,l,f,h;return n.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.host,a=e.path,s=e.params,o=e.query,console.log("params in posts index",JSON.stringify(s)),(r=parseInt(o.page))||this.redirect(302,"".concat(s.theuser,"/posts?page=1")),t.next=6,q(s.theuser);case 6:return c=t.sent,r>0&&r--,console.log(c.length),i=c.length,t.next=12,S(s.theuser);case 12:return u=t.sent,p=u.posts_per_page||5,l=r*p,f=r*p+p,h=c.slice(l,f),t.abrupt("return",{path:a,posts:h,totalPostsLength:i,metadata:u});case 18:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}function G(t,n,e){var a,s=n.posts,o=void 0===s?[]:s,r=n.metadata,c=n.totalPostsLength,i=n.path,u=L(),p=(u.preloading,u.page);u.session;N(t,p,function(t){return e(7,a=t)}),console.log("in posts index",a.params);var l=n.username,f=void 0===l?a.params.theuser:l,h=n.pageNum,m=void 0===h?a.query.page:h;return t.$set=function(t){"posts"in t&&e(0,o=t.posts),"metadata"in t&&e(1,r=t.metadata),"totalPostsLength"in t&&e(2,c=t.totalPostsLength),"path"in t&&e(6,i=t.path),"username"in t&&e(3,f=t.username),"pageNum"in t&&e(4,m=t.pageNum)},[o,r,c,f,m,p,i]}export default(function(t){e(a,u);var n=J(a);function a(t){var e;return o(this,a),e=n.call(this),r(i(e),t,G,K,c,{posts:0,metadata:1,totalPostsLength:2,path:6,username:3,pageNum:4}),e}return a}());export{M as preload};
